<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>サプライズ忍者（秘伝・乱入之巻）</title>
    <!-- Google Fonts: 筆文字や和風明朝体 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;700&family=Yuji+Syuku&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <!-- アプリ全体を包むコンテナ -->
    <div id="app">

        <!-- Screen 1: 入力（Activity Entry） -->
        <section id="screen-entry" class="screen active">
            <div class="intro-container">
                <h1 class="main-title">秘伝・乱入之巻</h1>
                <div class="ninja-icon-large">🥷</div>
                <p class="intro-text">日常の隙間に、忍は潜む。<br>いま、何をしておる？</p>

                <div class="form-group">
                    <label for="activity-input">いまの行動（必須）</label>
                    <input type="text" id="activity-input" placeholder="例：コーヒーを淹れている、会議中..." maxlength="30">
                </div>

                <div class="form-group">
                    <label for="category-select">状況（任意）</label>
                    <select id="category-select">
                        <option value="生活">生活（日常）</option>
                        <option value="仕事">仕事（忍務）</option>
                        <option value="学習">学習（修行）</option>
                        <option value="創作">創作（秘術）</option>
                        <option value="休憩">休憩（茶屋）</option>
                        <option value="移動">移動（早馬）</option>
                        <option value="その他">その他（不明）</option>
                    </select>
                </div>

                <button id="btn-open-scroll" class="btn-primary">巻物を開く</button>

                <div class="footer-link">
                    <button id="btn-view-archive-from-entry" class="btn-text">古き巻物を見る（履歴）</button>
                </div>
            </div>
        </section>

        <!-- Screen 2: 結果（Main Result） -->
        <section id="screen-result" class="screen">
            <!-- 忍者メインビジュアル -->
            <div class="visual-area">
                <img src="assets/ninja.png?v=4" alt="Ninja Visual" class="ninja-img">
                <div class="visual-gradient"></div>
            </div>

            <!-- 巻物カード -->
            <div class="scroll-card-wrapper">
                <div class="scroll-card">
                    <div class="scroll-header">
                        <h2 class="scroll-title">秘伝・乱入之巻</h2>
                        <div id="seal-mark" class="seal-mark">極秘</div>
                    </div>

                    <div class="scroll-body">
                        <!-- 1. 口上 -->
                        <div class="section-title">口上</div>
                        <div class="text-box">
                            <p id="result-scene" class="text-body-bold">ここに乱入シーンが表示されます。</p>
                        </div>
                        <hr class="divider-thin">

                        <!-- 2. 術式 -->
                        <div class="section-title">術式</div>
                        <div class="text-box">
                            <ol id="result-steps" class="steps-list">
                                <li>ステップ1</li>
                                <li>ステップ2</li>
                                <li>ステップ3</li>
                            </ol>
                        </div>
                        <hr class="divider-thin">

                        <!-- 3. 余韻 -->
                        <div class="section-title">余韻</div>
                        <div class="text-box">
                            <p id="result-och" class="text-body">ここにオチが表示されます。</p>
                        </div>
                        <hr class="divider-thin">

                        <!-- 4. 判定 -->
                        <div id="judgment-area">
                            <div class="section-title">判定</div>
                            <div class="buttons-vertical">
                                <button id="btn-yes" class="btn-judgement btn-yes">面白くなる<span
                                        class="sub-text">（開帳）</span></button>
                                <button id="btn-no" class="btn-judgement btn-no">台無し<span
                                        class="sub-text">（封印）</span></button>
                            </div>

                            <!-- スライダーエリア（判定後に表示） -->
                            <div id="slider-area" class="hidden">
                                <div class="slider-label-group">
                                    <span id="slider-label-key">奥義圧</span>
                                    <span id="slider-value">50</span>/100
                                </div>
                                <input type="range" id="intensity-slider" min="0" max="100" value="50">

                                <textarea id="result-note" placeholder="一言メモ（任意）" rows="2"></textarea>

                                <button id="btn-save" class="btn-primary btn-save">巻物に刻む</button>
                                <button id="btn-cancel-choice" class="btn-text-small">選択解除</button>
                            </div>
                        </div>

                        <!-- 完了メッセージ（保存後に表示） -->
                        <div id="saved-message" class="hidden">
                            <p class="saved-text">―― 記録完了 ――</p>
                        </div>

                        <!-- Screen 2 Footer -->
                        <div id="result-footer-actions" class="result-footer">
                            <button id="btn-retry" class="btn-secondary">次の乱入を召喚</button>
                            <button id="btn-view-archive" class="btn-text">巻物庫を開く</button>
                        </div>

                        <!-- 写経モード時のみ表示 -->
                        <div id="shakyo-footer" class="shakyo-footer hidden">
                            — 秘伝・乱入之巻 / 記録番号: <span id="shakyo-log-id">0000</span> —
                        </div>
                    </div>
                </div>
                <!-- 木軸 -->
                <div class="scroll-axis axis-left"></div>
                <div class="scroll-axis axis-right"></div>
            </div>

            <!-- スクショモード切替フロートボタン -->
            <button id="btn-toggle-shakyo" class="btn-float-toggle">写経モード</button>
        </section>

        <!-- Screen 3: 履歴（Archive） -->
        <section id="screen-archive" class="screen">
            <header class="archive-header">
                <h2>巻物庫</h2>
                <button id="btn-back-to-entry" class="btn-text">戻る</button>
            </header>

            <div id="archive-list" class="archive-list">
                <!-- JSでリスト生成 -->
                <div class="empty-state">まだ巻物は存在せぬ。</div>
            </div>
        </section>

    </div>

    <!-- Scripts -->
    <script type="module" src="js/app.js"></script>
</body>

</html>